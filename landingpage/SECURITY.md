# セキュリティガイド

## 管理画面のアクセス制御

### 🔒 認証システム

DogeDiggerの管理画面では、JWT（JSON Web Token）ベースの認証システムを使用しています。

### 🚨 重要な設定

#### 1. 環境変数の設定

本番環境では必ず以下の環境変数を設定してください：

```bash
# 管理者認証情報（必ず変更してください）
ADMIN_USERNAME=your_admin_username
ADMIN_PASSWORD=your_very_secure_password

# JWT秘密鍵（最低32文字の複雑な文字列）
JWT_SECRET=your_super_secret_jwt_key_minimum_32_characters_long
```

#### 2. パスワード要件

本番環境では以下の要件を満たすパスワードを使用してください：

- 最低12文字以上
- 大文字・小文字・数字・記号を含む
- 辞書にない文字列
- 例：`P@ssw0rd123!MyStr0ngP@ss`

#### 3. JWT秘密鍵

- 最低32文字の複雑な文字列を使用
- 定期的に更新（推奨：3-6ヶ月ごと）
- 他のプロジェクトと共有しない

### 🔐 アクセス方法

1. **ログインページ**: `/admin/login`
2. **管理画面**: `/admin/waitlist` （認証後のみアクセス可能）

### 🛡️ セキュリティ機能

- **JWT認証**: 24時間有効のトークンベース認証
- **自動リダイレクト**: 未認証ユーザーはログインページに自動リダイレクト
- **トークン検証**: 各リクエストでトークンの有効性をチェック
- **自動ログアウト**: トークン期限切れ時の自動ログアウト

### ⚠️ 開発環境のデフォルト認証情報

開発環境では以下のデフォルト認証情報が使用されます：
- ユーザー名: `admin`
- パスワード: `admin123`

**本番環境では必ずこれらを変更してください！**

### 🔄 セッション管理

- トークン有効期限: 24時間
- ローカルストレージに保存（XSS対策として今後はhttpOnlyクッキーへの移行を検討）
- ログアウト時にトークンを削除

### 🚧 将来の改善点

1. **二要素認証（2FA）**の実装
2. **IP制限**機能の追加
3. **httpOnlyクッキー**への移行
4. **ブルートフォース攻撃**対策
5. **監査ログ**機能の実装

### 📞 セキュリティ問題の報告

セキュリティに関する問題を発見した場合は、すぐにプロジェクト管理者に連絡してください。